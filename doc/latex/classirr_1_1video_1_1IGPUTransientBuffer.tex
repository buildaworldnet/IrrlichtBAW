\hypertarget{classirr_1_1video_1_1IGPUTransientBuffer}{}\section{irr\+:\+:video\+:\+:I\+G\+P\+U\+Transient\+Buffer Class Reference}
\label{classirr_1_1video_1_1IGPUTransientBuffer}\index{irr\+::video\+::\+I\+G\+P\+U\+Transient\+Buffer@{irr\+::video\+::\+I\+G\+P\+U\+Transient\+Buffer}}


Persistently Mapped buffer.  




{\ttfamily \#include $<$I\+G\+P\+U\+Transient\+Buffer.\+h$>$}

Inheritance diagram for irr\+:\+:video\+:\+:I\+G\+P\+U\+Transient\+Buffer\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{classirr_1_1video_1_1IGPUTransientBuffer}
\end{center}
\end{figure}
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structirr_1_1video_1_1IGPUTransientBuffer_1_1Allocation}{Allocation}
\end{DoxyCompactItemize}
\subsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
enum \hyperlink{classirr_1_1video_1_1IGPUTransientBuffer_a08e145b30588c9a3e5ec469e36f2847b}{E\+\_\+\+A\+L\+L\+O\+C\+\_\+\+R\+E\+T\+U\+R\+N\+\_\+\+S\+T\+A\+T\+US} \{ {\bfseries E\+A\+R\+S\+\_\+\+S\+U\+C\+C\+E\+SS} = 0, 
\hyperlink{classirr_1_1video_1_1IGPUTransientBuffer_a08e145b30588c9a3e5ec469e36f2847bab3c64a0286d714b4590193582b0d0cb6}{E\+A\+R\+S\+\_\+\+F\+A\+IL}, 
{\bfseries E\+A\+R\+S\+\_\+\+E\+R\+R\+OR}
 \}
\item 
enum {\bfseries E\+\_\+\+W\+A\+I\+T\+\_\+\+P\+O\+L\+I\+CY} \{ {\bfseries E\+W\+P\+\_\+\+D\+O\+N\+T\+\_\+\+W\+A\+IT}, 
{\bfseries E\+W\+P\+\_\+\+W\+A\+I\+T\+\_\+\+F\+O\+R\+\_\+\+C\+P\+U\+\_\+\+U\+N\+M\+AP} =1, 
{\bfseries E\+W\+P\+\_\+\+W\+A\+I\+T\+\_\+\+F\+O\+R\+\_\+\+G\+P\+U\+\_\+\+F\+R\+EE} =2
 \}\hypertarget{classirr_1_1video_1_1IGPUTransientBuffer_aa62d526fb6c6a166336fdc691219a542}{}\label{classirr_1_1video_1_1IGPUTransientBuffer_aa62d526fb6c6a166336fdc691219a542}

\end{DoxyCompactItemize}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classirr_1_1video_1_1IGPUBuffer}{I\+G\+P\+U\+Buffer} $\ast$ {\bfseries get\+Underlying\+Buffer} ()\hypertarget{classirr_1_1video_1_1IGPUTransientBuffer_ab8ad89fa1f308a360e1983f99ba58807}{}\label{classirr_1_1video_1_1IGPUTransientBuffer_ab8ad89fa1f308a360e1983f99ba58807}

\item 
bool {\bfseries Validate} ()\hypertarget{classirr_1_1video_1_1IGPUTransientBuffer_a9dcefa03ff7ea4f3ac4d3948e9170e67}{}\label{classirr_1_1video_1_1IGPUTransientBuffer_a9dcefa03ff7ea4f3ac4d3948e9170e67}

\item 
void {\bfseries Print\+Debug} (bool needs\+Mutex=true)\hypertarget{classirr_1_1video_1_1IGPUTransientBuffer_abe7c1e4eb63672bd00d46c8d5172301e}{}\label{classirr_1_1video_1_1IGPUTransientBuffer_abe7c1e4eb63672bd00d46c8d5172301e}

\item 
\hyperlink{classirr_1_1video_1_1IGPUTransientBuffer_a08e145b30588c9a3e5ec469e36f2847b}{E\+\_\+\+A\+L\+L\+O\+C\+\_\+\+R\+E\+T\+U\+R\+N\+\_\+\+S\+T\+A\+T\+US} {\bfseries Alloc} (size\+\_\+t \&offset\+Out, const size\+\_\+t \&max\+Size, const size\+\_\+t \&alignment=32, E\+\_\+\+W\+A\+I\+T\+\_\+\+P\+O\+L\+I\+CY wait\+Policy=E\+W\+P\+\_\+\+D\+O\+N\+T\+\_\+\+W\+A\+IT, bool grow\+If\+Too\+Small=false)\hypertarget{classirr_1_1video_1_1IGPUTransientBuffer_a0f7829c4499edf6ba5b26847641a4828}{}\label{classirr_1_1video_1_1IGPUTransientBuffer_a0f7829c4499edf6ba5b26847641a4828}

\item 
bool {\bfseries Commit} (const size\+\_\+t \&start, const size\+\_\+t \&end)\hypertarget{classirr_1_1video_1_1IGPUTransientBuffer_a5627d745e53c7664ac297f366f55dd9d}{}\label{classirr_1_1video_1_1IGPUTransientBuffer_a5627d745e53c7664ac297f366f55dd9d}

\item 
bool {\bfseries Place} (size\+\_\+t \&offset\+Out, const void $\ast$data, const size\+\_\+t \&data\+Size, const size\+\_\+t \&alignment=32, const E\+\_\+\+W\+A\+I\+T\+\_\+\+P\+O\+L\+I\+CY \&wait\+Policy=E\+W\+P\+\_\+\+D\+O\+N\+T\+\_\+\+W\+A\+IT, const bool \&grow\+If\+Too\+Small=false)\hypertarget{classirr_1_1video_1_1IGPUTransientBuffer_ade893f9cc1109c472568db7c69018615}{}\label{classirr_1_1video_1_1IGPUTransientBuffer_ade893f9cc1109c472568db7c69018615}

\item 
bool \hyperlink{classirr_1_1video_1_1IGPUTransientBuffer_aa575e8d02383688f671e1ed818790d17}{Free} (const size\+\_\+t \&start, const size\+\_\+t \&end)
\item 
bool {\bfseries fence\+Range\+Used\+By\+G\+PU} (const size\+\_\+t \&start, const size\+\_\+t \&end)\hypertarget{classirr_1_1video_1_1IGPUTransientBuffer_a25453b67fc5f499ac06e61e04c338574}{}\label{classirr_1_1video_1_1IGPUTransientBuffer_a25453b67fc5f499ac06e61e04c338574}

\item 
bool {\bfseries query\+Range\+Committed} (const size\+\_\+t \&start, const size\+\_\+t \&end)\hypertarget{classirr_1_1video_1_1IGPUTransientBuffer_a6ba14ee0eee587474da04d3d24a307cf}{}\label{classirr_1_1video_1_1IGPUTransientBuffer_a6ba14ee0eee587474da04d3d24a307cf}

\item 
bool {\bfseries query\+Range} (const size\+\_\+t \&start, const size\+\_\+t \&end, const Allocation\+::\+E\+\_\+\+A\+L\+L\+O\+C\+A\+T\+I\+O\+N\+\_\+\+S\+T\+A\+TE \&state)\hypertarget{classirr_1_1video_1_1IGPUTransientBuffer_adcacd73554da2efeabd7ef440bade85b}{}\label{classirr_1_1video_1_1IGPUTransientBuffer_adcacd73554da2efeabd7ef440bade85b}

\item 
bool {\bfseries wait\+Range\+Fences} (const size\+\_\+t \&start, const size\+\_\+t \&end, size\+\_\+t time\+Out\+Ns)\hypertarget{classirr_1_1video_1_1IGPUTransientBuffer_acb2efc6648dd3457a7b444dd965879a4}{}\label{classirr_1_1video_1_1IGPUTransientBuffer_acb2efc6648dd3457a7b444dd965879a4}

\item 
void {\bfseries Defrag\+Descriptor} ()\hypertarget{classirr_1_1video_1_1IGPUTransientBuffer_ad86d655907dced2d87bb44bc4b3648ec}{}\label{classirr_1_1video_1_1IGPUTransientBuffer_ad86d655907dced2d87bb44bc4b3648ec}

\item 
const size\+\_\+t \& {\bfseries get\+Free\+Space} () const \hypertarget{classirr_1_1video_1_1IGPUTransientBuffer_a679a10b6e9852ea9b554a7a4753a7bda}{}\label{classirr_1_1video_1_1IGPUTransientBuffer_a679a10b6e9852ea9b554a7a4753a7bda}

\item 
const size\+\_\+t \& {\bfseries get\+True\+Free\+Space} () const \hypertarget{classirr_1_1video_1_1IGPUTransientBuffer_ab20491c633e85264b79630e4759a1d70}{}\label{classirr_1_1video_1_1IGPUTransientBuffer_ab20491c633e85264b79630e4759a1d70}

\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{classirr_1_1video_1_1IGPUTransientBuffer}{I\+G\+P\+U\+Transient\+Buffer} $\ast$ {\bfseries create\+Mapped\+Transient\+Buffer} (\hyperlink{classirr_1_1video_1_1IVideoDriver}{I\+Video\+Driver} $\ast$driver, const size\+\_\+t \&bufsize=0x100000u, const E\+\_\+\+G\+P\+U\+\_\+\+B\+U\+F\+F\+E\+R\+\_\+\+A\+C\+C\+E\+S\+S \&access\+Pattern=\+E\+G\+B\+A\+\_\+\+W\+R\+I\+T\+E, const bool \&in\+C\+P\+U\+Mem=true, const bool \&growable=false, const bool \&auto\+Flush=true, const bool \&thread\+Safe=true)\hypertarget{classirr_1_1video_1_1IGPUTransientBuffer_a86dcc22d24ca78f6823eee14b883196f}{}\label{classirr_1_1video_1_1IGPUTransientBuffer_a86dcc22d24ca78f6823eee14b883196f}

\item 
static \hyperlink{classirr_1_1video_1_1IGPUTransientBuffer}{I\+G\+P\+U\+Transient\+Buffer} $\ast$ {\bfseries create\+Mapped\+Transient\+Buffer} (\hyperlink{classirr_1_1video_1_1IVideoDriver}{I\+Video\+Driver} $\ast$driver, \hyperlink{classirr_1_1video_1_1IGPUMappedBuffer}{I\+G\+P\+U\+Mapped\+Buffer} $\ast$buffer, const bool \&growable=false, const bool \&auto\+Flush=true, const bool \&thread\+Safe=true)\hypertarget{classirr_1_1video_1_1IGPUTransientBuffer_a1c150de3ed0a5dac854fbb03a4d173c9}{}\label{classirr_1_1video_1_1IGPUTransientBuffer_a1c150de3ed0a5dac854fbb03a4d173c9}

\item 
static \hyperlink{classirr_1_1video_1_1IGPUTransientBuffer}{I\+G\+P\+U\+Transient\+Buffer} $\ast$ {\bfseries create\+Transient\+Buffer} (\hyperlink{classirr_1_1video_1_1IVideoDriver}{I\+Video\+Driver} $\ast$driver, const size\+\_\+t \&bufsize=0x100000u, const E\+\_\+\+G\+P\+U\+\_\+\+B\+U\+F\+F\+E\+R\+\_\+\+A\+C\+C\+E\+S\+S \&access\+Pattern=\+E\+G\+B\+A\+\_\+\+W\+R\+I\+T\+E, const bool \&in\+C\+P\+U\+Mem=true, const bool \&can\+Modify\+Sub\+Data=false, const bool \&growable=false, const bool \&auto\+Flush=true, const bool \&thread\+Safe=true)\hypertarget{classirr_1_1video_1_1IGPUTransientBuffer_ad3271733fe1db3ac1fd03dd6b2732018}{}\label{classirr_1_1video_1_1IGPUTransientBuffer_ad3271733fe1db3ac1fd03dd6b2732018}

\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
Persistently Mapped buffer. 

A) Only one thread can modify buffer descriptor B) Only the main thread can grow the buffer!!!!!!!!! (Open\+GL) B1) The grow can only occur if there are no pointers mapped to data B2) But can alloc from other thread if we agree to wait on \hyperlink{classirr_1_1video_1_1IGPUTransientBuffer_aa575e8d02383688f671e1ed818790d17}{Free()} or G\+PU fences Thread Safeness\+: \begin{DoxyVerb}1) Creation and Deletion of IGPUTransientBuffer is NOT THREAD SAFE, and CAN ONLY BE DONE IN THE OPENGL THREAD
    (basically expose the object [handle] to other threads after creating it)
2) Using the pointer returned by getRangePointer(size_t start) is NOT THREAD SAFE,
    UNLESS AT LEAST one sub-range remains allocated, that is Commit() has not been called on a Alloc()'ed subrange yet
3) fenceRangeUsedByGPU() most probably should be calle donly by the OpenGL THREAD!!!!
4) Alloc(,growIfTooSmall=true) CAN ONLY BE CALLED FROM THE OpenGL THREAD!!!
5) Alloc(), Commit(), Place(), Free(), fenceRangeUsedByGPU() and DefragDescriptor() are all thread safe
6) Using EWP_WAIT_FOR_CPU_UNMAP bit on any call while having un-Commit()'ed ranges (which will not be Commit()'ed by other Threads) will DEADLOCK
7) Using EWP_WAIT_FOR_GPU_FREE bit on Alloc() while having un-Free()'ed ranges (which will not be Free()'ed by other Threads) will DEADLOCK\end{DoxyVerb}
 

\subsection{Member Enumeration Documentation}
\index{irr\+::video\+::\+I\+G\+P\+U\+Transient\+Buffer@{irr\+::video\+::\+I\+G\+P\+U\+Transient\+Buffer}!E\+\_\+\+A\+L\+L\+O\+C\+\_\+\+R\+E\+T\+U\+R\+N\+\_\+\+S\+T\+A\+T\+US@{E\+\_\+\+A\+L\+L\+O\+C\+\_\+\+R\+E\+T\+U\+R\+N\+\_\+\+S\+T\+A\+T\+US}}
\index{E\+\_\+\+A\+L\+L\+O\+C\+\_\+\+R\+E\+T\+U\+R\+N\+\_\+\+S\+T\+A\+T\+US@{E\+\_\+\+A\+L\+L\+O\+C\+\_\+\+R\+E\+T\+U\+R\+N\+\_\+\+S\+T\+A\+T\+US}!irr\+::video\+::\+I\+G\+P\+U\+Transient\+Buffer@{irr\+::video\+::\+I\+G\+P\+U\+Transient\+Buffer}}
\subsubsection[{\texorpdfstring{E\+\_\+\+A\+L\+L\+O\+C\+\_\+\+R\+E\+T\+U\+R\+N\+\_\+\+S\+T\+A\+T\+US}{E\_ALLOC\_RETURN\_STATUS}}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf irr\+::video\+::\+I\+G\+P\+U\+Transient\+Buffer\+::\+E\+\_\+\+A\+L\+L\+O\+C\+\_\+\+R\+E\+T\+U\+R\+N\+\_\+\+S\+T\+A\+T\+US}}\hypertarget{classirr_1_1video_1_1IGPUTransientBuffer_a08e145b30588c9a3e5ec469e36f2847b}{}\label{classirr_1_1video_1_1IGPUTransientBuffer_a08e145b30588c9a3e5ec469e36f2847b}
\begin{Desc}
\item[Enumerator]\par
\begin{description}
\index{E\+A\+R\+S\+\_\+\+F\+A\+IL@{E\+A\+R\+S\+\_\+\+F\+A\+IL}!irr\+::video\+::\+I\+G\+P\+U\+Transient\+Buffer@{irr\+::video\+::\+I\+G\+P\+U\+Transient\+Buffer}}\index{irr\+::video\+::\+I\+G\+P\+U\+Transient\+Buffer@{irr\+::video\+::\+I\+G\+P\+U\+Transient\+Buffer}!E\+A\+R\+S\+\_\+\+F\+A\+IL@{E\+A\+R\+S\+\_\+\+F\+A\+IL}}\item[{\em 
E\+A\+R\+S\+\_\+\+F\+A\+IL\hypertarget{classirr_1_1video_1_1IGPUTransientBuffer_a08e145b30588c9a3e5ec469e36f2847bab3c64a0286d714b4590193582b0d0cb6}{}\label{classirr_1_1video_1_1IGPUTransientBuffer_a08e145b30588c9a3e5ec469e36f2847bab3c64a0286d714b4590193582b0d0cb6}
}]E\+A\+R\+S\+\_\+\+T\+I\+M\+E\+O\+UT, Future. \end{description}
\end{Desc}


\subsection{Member Function Documentation}
\index{irr\+::video\+::\+I\+G\+P\+U\+Transient\+Buffer@{irr\+::video\+::\+I\+G\+P\+U\+Transient\+Buffer}!Free@{Free}}
\index{Free@{Free}!irr\+::video\+::\+I\+G\+P\+U\+Transient\+Buffer@{irr\+::video\+::\+I\+G\+P\+U\+Transient\+Buffer}}
\subsubsection[{\texorpdfstring{Free(const size\+\_\+t \&start, const size\+\_\+t \&end)}{Free(const size\_t \&start, const size\_t \&end)}}]{\setlength{\rightskip}{0pt plus 5cm}bool irr\+::video\+::\+I\+G\+P\+U\+Transient\+Buffer\+::\+Free (
\begin{DoxyParamCaption}
\item[{const size\+\_\+t \&}]{start, }
\item[{const size\+\_\+t \&}]{end}
\end{DoxyParamCaption}
)}\hypertarget{classirr_1_1video_1_1IGPUTransientBuffer_aa575e8d02383688f671e1ed818790d17}{}\label{classirr_1_1video_1_1IGPUTransientBuffer_aa575e8d02383688f671e1ed818790d17}
Unless memory is being used by G\+PU it will be returned to free pool straight away Useful if you dont end up using comitted memory by G\+PU 

The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
include/I\+G\+P\+U\+Transient\+Buffer.\+h\end{DoxyCompactItemize}
